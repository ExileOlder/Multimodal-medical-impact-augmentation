# Inference Configuration for Medical Image Augmentation System

# 路径说明 (Path Notes):
# - 所有路径使用相对路径，相对于项目根目录
# - 项目根目录应位于 /home/Backup/maziheng/medical-image-augmentation-system/
# - 示例：相对路径 "checkpoints/best_model.pth" 对应绝对路径 "/home/Backup/maziheng/medical-image-augmentation-system/checkpoints/best_model.pth"
# - All paths use relative paths, relative to the project root directory
# - Project root should be located at /home/Backup/maziheng/medical-image-augmentation-system/
# - Example: relative path "checkpoints/best_model.pth" corresponds to absolute path "/home/Backup/maziheng/medical-image-augmentation-system/checkpoints/best_model.pth"

# Model Configuration
model:
  checkpoint_path: "checkpoints/best_model.pth"  # Path to trained model (relative to project root)
  device: "cuda"                                  # cuda or cpu
  use_flash_attn: true                           # Enable Flash Attention 2

# Generation Configuration
generation:
  image_size: 1024               # Output image resolution
  num_inference_steps: 50        # Number of sampling steps (DDPM/DDIM)
  guidance_scale: 7.5            # Classifier-free guidance strength
  sampler: "ddim"                # Sampling algorithm: ddpm, ddim
  
  # Batch Generation
  batch_size: 4                  # Number of images to generate in parallel
  num_samples: 1                 # Number of samples per prompt
  
  # Seed Configuration
  seed: null                     # Random seed (null for random)
  
# Output Configuration
output:
  output_dir: "results"          # Directory to save generated images (relative to project root)
  save_metadata: true            # Save generation parameters as JSON
  image_format: "png"            # Output image format

# Text Configuration
text:
  max_length: 77                 # Maximum text token length
  
# Label-to-Caption Mapping (DR Grading)
dr_grade_mapping:
  0: "No diabetic retinopathy"
  1: "Mild non-proliferative diabetic retinopathy"
  2: "Moderate non-proliferative diabetic retinopathy"
  3: "Severe non-proliferative diabetic retinopathy"
  4: "Proliferative diabetic retinopathy"
